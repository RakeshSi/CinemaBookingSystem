@model IEnumerable<Cinema.DAL.Models.TblBookingSeat>

@{
    ViewData["Title"] = "Booking Cinema";
}

<style>
    .ColorCls {
        background-color: coral;
    }

    #Email-error {

        color: red;
    }

    #Name-error {
        color: red;
    }

    .AvailableTicket {
        background-color: gray;
        color: black;
    }

    .loader_div {
        position: absolute;
        top: 0;
        bottom: 0%;
        left: 0;
        right: 0%;
        z-index: 99;
        opacity: 0.7;
        display: none;
        background: lightgrey url('../../../images/youloadergif.gif') center center no-repeat;
    }
</style>

<div id="loader_div" class="loader_div"></div>
<div class="form-group">

    <div class="form-group">
        Available: <button style="background-color: grey;
        color: black">
            A
        </button>
    </div>
    <br>
    <div class="form-group">
        Reserved: <button style="background-color:red;color:black">R</button>
    </div>
    <br>

    <div class="text-center">
        <div class="container">

            @foreach (var item in Model)
            {
                if (@item.BookingStatus == false)
                {

                    <button title="Available" id="btn_@item.SeatNumber" onclick="SeatStatus(@item.SeatNumber,0)" style="background-color:grey;color:black;">@item.SeatNumber</button>
                    if (item.SeatNumber % 5 == 0)
                    {
                        <br />
                    }
                }
                else
                {
                    <button title="Reserved" id="btn_@item.SeatNumber" onclick="SeatStatus(@item.SeatNumber,1)" style="background-color:red;color:black;">@item.SeatNumber</button>

                    if (item.SeatNumber % 5 == 0)
                    {
                        <br />
                    }
                }

            }
        </div>
    </div>

    <div class="form-inline" style="float:right">
        <button class="btn btn-success" id="ConfirmBtn" onclick="BookingTicket()" style="float:right">Book Now</button>
    </div>
</div>

<div id="UserInformation" class="modal fade" role="dialog" data-backdrop="static">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" onclick="ClearUserDialog()" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <span id="SelectedTicketNumber"></span>
                <form id="FormUser">
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="Name">Name:</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="Name" placeholder="Enter Name" required="required" autocomplete="off">
                            <span id="ErrorUserMsg"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="Email">Email:</label>
                        <div class="col-sm-10">
                            <input type="email" class="form-control" id="Email" required="required" autocomplete="off" placeholder="Enter email">
                            <span id="ErrorEmailMsg"></span>

                        </div>
                    </div>
                </form>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="BookNow()">Submit</button>
            </div>
        </div>

    </div>
</div>

<div id="SecretKeyInformation" class="modal fade" role="dialog" data-backdrop="static">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" onclick="CloseDialog()" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="NumberSeat" />
                <form id="FormOtp">
                    <div class="form-group">
                        <label class="control-label" for="Name">Please Enter Secret Key:</label>
                        <div class="row">
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="secretCode" placeholder="Enter Secret Code" required="required" autocomplete="off">
                                <span id="ErrorCodeMsg"></span>
                            </div>
                            <div class="col-sm-2">
                                <a class="btn btn-primary" style="color:white" onclick="KeyCheck()">Check</a>
                            </div>
                        </div>
                            <span id="WrongSecretCode" style="color:red;"></span>
                       
                    </div>

                    <div class="form-group" id="SeatDetails" style="display:none">
                        <label class="control-labe" id="seatNumbesTxt">Seat Number <b id="seatNumber"></b></label>
                        <button type="button" id="SeatUnBook" onclick="Unbook()" class="btn btn-danger">Cancel Booking</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


@section Scripts {
    <script src="~/js/Index.js"></script>
    <script>
        $("#FormUser").validate();
    </script>

}
